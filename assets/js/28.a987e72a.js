(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{593:function(t,a,s){"use strict";s.r(a);var n=s(6),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),s("h2",{attrs:{id:"目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目录"}},[t._v("#")]),t._v(" 目录")]),t._v(" "),s("ul",[s("li",[t._v("描述")]),t._v(" "),s("li",[t._v("读取配置")]),t._v(" "),s("li",[t._v("注入配置")]),t._v(" "),s("li",[t._v("动态配置")]),t._v(" "),s("li",[t._v("注解配置")]),t._v(" "),s("li",[t._v("配置实体类")]),t._v(" "),s("li",[t._v("开启 Nacos 分布式配置中心")]),t._v(" "),s("li",[t._v("开启 Apollo 分布式配置中心")]),t._v(" "),s("li",[t._v("配置内容加密解密")]),t._v(" "),s("li",[t._v("常见问题")]),t._v(" "),s("li",[t._v("Jboot所有配置参考")])]),t._v(" "),s("h2",{attrs:{id:"描述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#描述"}},[t._v("#")]),t._v(" 描述")]),t._v(" "),s("p",[t._v("在 Jboot \b应用中，可以通过几下几种方式给 Jboot 应用进行配置。")]),t._v(" "),s("ul",[s("li",[t._v("jboot.properties 配置文件")]),t._v(" "),s("li",[t._v("jboot-xxx.properties 配置文件")]),t._v(" "),s("li",[t._v("环境变量")]),t._v(" "),s("li",[t._v("Jvm 系统属性")]),t._v(" "),s("li",[t._v("启动参数")]),t._v(" "),s("li",[t._v("分布式配置中心（目前支持 Apollo 和 Nacos）")])]),t._v(" "),s("blockquote",[s("p",[t._v("注意：\n1、如果同一个属性被多处配置，那么 Jboot 读取配置的优先顺序是：\n"),s("code",[t._v("分布式配置中心")]),t._v(" > "),s("code",[t._v("启动参数")]),t._v(" > "),s("code",[t._v("Jvm 系统属性")]),t._v(" > "),s("code",[t._v("环境变量")]),t._v(" > "),s("code",[t._v("jboot-xxx.properties")]),t._v(" > "),s("code",[t._v("jboot.properties")]),t._v("。")]),t._v(" "),s("p",[t._v("2、jboot-xxx.properties 的含义是：当配置 jboot.app.mode=dev 时，默认去读取 jboot-dev.properties，同理当配置 jboot.app.mode=product 时，默认去读取 jboot-product.properties，jboot-xxx.properties 的文件名称是来源于 jboot.app.mode 的配置。jboot-xxx.properties 这个文件并不是必须的，但当该配置文件存在时，其优读取顺序先于 jboot.properties。")])]),t._v(" "),s("h2",{attrs:{id:"读取配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#读取配置"}},[t._v("#")]),t._v(" 读取配置")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" host "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jboot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"undertow.host"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" port "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jboot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"undertow.port"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"注入配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注入配置"}},[t._v("#")]),t._v(" 注入配置")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AopController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JbootController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConfigValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"undertow.host"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" host"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConfigValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"undertow.port"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" port"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("index")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderText")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"host:"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" host "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"   port:"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" port"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"动态配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#动态配置"}},[t._v("#")]),t._v(" 动态配置")]),t._v(" "),s("p",[t._v("在 Jboot 的所有配置中，我们可以通过 ${key} 来指定替换为 value。")]),t._v(" "),s("p",[t._v("示例1：")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("key1 = value1\nkey2 = ${key1}/abc\n")])])]),s("p",[t._v("那么读取到的 key2 的值为 "),s("code",[t._v("value1/abc")]),t._v("。")]),t._v(" "),s("p",[t._v("示例2：")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("key1 = value1\nkey2 = ${key1}/abc\nkey3 = abc/${key2}/xyz\n")])])]),s("p",[t._v("那么，key2 的值为 "),s("code",[t._v("value1/abc")]),t._v(" ，key3 的值为 "),s("code",[t._v("abc/value1/abc/xyz")])]),t._v(" "),s("p",[t._v("示例2：")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("key1 = value1\nkey2 = ${otherkey}/abc\n")])])]),s("p",[t._v("那么，因为系统中找不到 otherkey 的值，key2 的值为 "),s("code",[t._v("/abc")]),t._v("，如果我们在系统中，通过 "),s("code",[t._v("java -jar xxx.jar --otherkey=othervalue")]),t._v("，\n那么， key2 的值为 "),s("code",[t._v("othervalue/abc")])]),t._v(" "),s("h2",{attrs:{id:"注解配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注解配置"}},[t._v("#")]),t._v(" 注解配置")]),t._v(" "),s("p",[t._v("在应用开发中，我们通常会使用注解，Jboot 内置了多个注解。")]),t._v(" "),s("p",[t._v("例如：")]),t._v(" "),s("ul",[s("li",[t._v("@RequestMapping")]),t._v(" "),s("li",[t._v("@EnableCORS")]),t._v(" "),s("li",[t._v("@RPCInject")]),t._v(" "),s("li",[t._v("@RPCBean")]),t._v(" "),s("li",[t._v("...等等")])]),t._v(" "),s("p",[t._v("在使用注解的\b时候，我们通常会这样来使用，例如：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controller")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//....")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("或者")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RPCBean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("group"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myGroup"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myVersion"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserServiceProvider")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//....")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("但是，无论是 "),s("code",[t._v('@RequestMapping("/user")')]),t._v(" 或者是 "),s("code",[t._v('@RPCBean(group="myGroup",version="myVersion",port=...)')]),t._v(" ,\n其参数配置都是固定的，因此，Jboot 提供了一种动态的配置方法，可以\b用于读取配置文件的内容。")]),t._v(" "),s("p",[t._v("例如：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${user.mapping}/abc"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controller")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//....")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("然后在配置文件 "),s("code",[t._v("jboot.properties")]),t._v(" （也可以是启动参数、环境变量等）添加上：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("user.mapping = /user\n")])])]),s("p",[t._v("其作用\b是等效于：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/use/abcr"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controller")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//....")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("因此，在\b Jboot 应用中，注解的值可以通过 "),s("code",[t._v("${key}")]),t._v(" 的方式，读取到配置内容的 key 对于的 \bvalue 值。")]),t._v(" "),s("h2",{attrs:{id:"配置实体类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置实体类"}},[t._v("#")]),t._v(" 配置实体类")]),t._v(" "),s("p",[t._v("很多时候，某个功能或组件可能需要 "),s("code",[t._v("一堆")]),t._v(" 的配置，而不是一个配置，无论是手动编码读取 或者 是通过注入，就可以让我们的项目产生重复的代码。")]),t._v(" "),s("p",[t._v("Jboot 提供了配置实体类功能，该功能自动把配置信息 "),s("code",[t._v("映射")]),t._v("  给一个 JavaBean 实体类，方便我们 "),s("code",[t._v("批量")]),t._v(" 读取配置信息。")]),t._v(" "),s("p",[t._v("例如：")]),t._v(" "),s("p",[t._v("某个组件叫 "),s("code",[t._v("component1")]),t._v(" ，它需要如下几个配置信息。")]),t._v(" "),s("ul",[s("li",[t._v("主机")]),t._v(" "),s("li",[t._v("端口号")]),t._v(" "),s("li",[t._v("账号")]),t._v(" "),s("li",[t._v("密码")]),t._v(" "),s("li",[t._v("超时时间")])]),t._v(" "),s("p",[t._v("那么，我们可以创建一个叫 "),s("code",[t._v("Component1Config")]),t._v(" 的实体类，定义好其属性，如下代码 ：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConfigModel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prefix"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"component1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component1Config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" host"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" port"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" accout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" timeout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 下方应还有 getter setter， 此处略")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("这样，我们就可以通过如下代码读 "),s("code",[t._v("Component1Config")]),t._v(" 信息。")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component1Config")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jboot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component1Config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("p",[t._v("配置内如如下：")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("component1.host")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("component1.port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("component1.accout")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("component1.password")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("component1.timeout")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("备注："),s("code",[t._v('@ConfigModel(prefix="component1")')]),t._v(" 注解的含义是 "),s("code",[t._v("Component1Config")]),t._v(" 的前缀是 "),s("code",[t._v("component1")]),t._v(" ，因此，其属性 "),s("code",[t._v("host")]),t._v(" 是来至配置文件的 "),s("code",[t._v("component1.host")]),t._v(" 的值。")])]),t._v(" "),s("h2",{attrs:{id:"开启-nacos-分布式配置中心"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开启-nacos-分布式配置中心"}},[t._v("#")]),t._v(" 开启 Nacos 分布式配置中心")]),t._v(" "),s("p",[s("strong",[t._v("第一步，添加 nacos 客户端的 Maven 依赖")])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.alibaba.nacos"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("nacos-client"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.3.2"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[s("strong",[t._v("第二步：启动 nacos")])]),t._v(" "),s("ul",[s("li",[t._v("Clone Nacos 项目")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("git clone https://github.com/nacos-group/nacos-docker.git\ncd nacos-docker\n")])])]),s("p",[t._v("单机模式 Derby")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("docker-compose -f example/standalone-derby.yaml up\n")])])]),s("p",[t._v("单机模式 Mysql")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("docker-compose -f example/standalone-mysql.yaml up\n")])])]),s("p",[t._v("集群模式")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("docker-compose -f example/cluster-hostname.yaml up \n")])])]),s("p",[t._v("Nacos 控制台")]),t._v(" "),s("p",[t._v("link：http://127.0.0.1:8848/nacos/")]),t._v(" "),s("p",[t._v("nacos 的相关文档在")]),t._v(" "),s("p",[t._v("https://nacos.io/zh-cn/docs/quick-start.html")]),t._v(" "),s("p",[t._v("或者")]),t._v(" "),s("p",[t._v("https://nacos.io/zh-cn/docs/quick-start-docker.html")]),t._v(" "),s("p",[s("strong",[t._v("第三步，在 jboot.properties 添加如下配置")])]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.enable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.serverAddr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("127.0.0.1:8848")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.dataId")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("jboot")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.group")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("jboot")]),t._v("\n")])])]),s("p",[t._v("nacos 支持如下更多配置，但是只需要以上配置就可以正常运行。")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.isUseCloudNamespaceParsing")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.isUseEndpointParsingRule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.endpoint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.endpointPort")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.namespace")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.username")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.password")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.accessKey")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.secretKey")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.ramRoleName")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.serverAddr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.contextPath")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.clusterName")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.encode")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.configLongPollTimeout")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.configRetryTime")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.maxRetry")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("jboot.config.nacos.enableRemoteSyncConfig")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxx")]),t._v("\n")])])]),s("h2",{attrs:{id:"开启-apollo-分布式配置中心"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开启-apollo-分布式配置中心"}},[t._v("#")]),t._v(" 开启 Apollo 分布式配置中心")]),t._v(" "),s("p",[s("strong",[t._v("第一步：添加 Apollo 客户端的 Maven 依赖")])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.ctrip.framework.apollo"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("apollo-client"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.7.0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[s("strong",[t._v("第二步，启动 Apollo")])]),t._v(" "),s("p",[t._v("相关文档在 https://github.com/ctripcorp/apollo/wiki/Quick-Start")]),t._v(" "),s("p",[s("strong",[t._v("第三步，在 jboot.properties 添加如下配置")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("jboot.config.apollo.enable = true\njboot.config.apollo.appId = SampleApp\njboot.config.apollo.meta = http://106.54.227.205:8080\n")])])]),s("h2",{attrs:{id:"配置内容加密解密"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置内容加密解密"}},[t._v("#")]),t._v(" 配置内容加密解密")]),t._v(" "),s("p",[t._v("为了安全起见，我们需要对配置里的一些内容进行加密，比如数据库的账号、密码等，防止 web 服务器被黑客入侵时保证数据库的安全。")]),t._v(" "),s("p",[t._v("配置的内容加密是由用户自己编写加密算法。此时，Jboot 读取的只是加密的内容，为了能正常还原解密之后的内容，用户需要给 "),s("code",[t._v("JbootConfigManager")]),t._v(" 配置上解密的实现 JbootConfigDecryptor。")]),t._v(" "),s("p",[t._v("一般情况下，我们需要在 JbootAppListener 的 "),s("code",[t._v("onInit()")]),t._v(" 里去配置。例如：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyApplicationListener")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JbootAppListener")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onInit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JbootConfigManager")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("me")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDecryptor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyConfigDecriptor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("我们需要在 "),s("code",[t._v("MyConfigDecriptor")]),t._v(" 的 "),s("code",[t._v("decrypt")]),t._v(" 方法里去实现自己的解密算法。例如：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyConfigDecriptor")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JbootConfigDecryptor")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("decrypt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" originalContent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在这里实现你自己的解密算法")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//key : 很多时候我们并不是针对所有的配置都进行加密，只是加密了个别配置")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//此时，我们可以通过 key 来判断那些无需加密的内容，不需要加密直接返回 originalContent 即可")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),s("p",[t._v("1、如何设置启动参数 ？")]),t._v(" "),s("blockquote",[s("p",[t._v("答：在 fatjar 模式下，可以通过添加 "),s("code",[t._v("--")]),t._v("（两个中划线） 来指定配置，例如：java -jar --undertow.port=8080  --undertow.host=0.0.0.0")])]),t._v(" "),s("p",[t._v("2、如何设置 Jvm 系统属性 ？")]),t._v(" "),s("blockquote",[s("p",[t._v("答：和启动参数一样，只需要把 "),s("code",[t._v("--")]),t._v(" 换成 "),s("code",[t._v("-D")]),t._v("，例如： java -jar -Dundertow.port=8080 -Dundertow.host=0.0.0.0")])]),t._v(" "),s("p",[t._v("3、如何设置系统环境变量 ？")]),t._v(" "),s("blockquote",[s("p",[t._v("答：在 Docker 下，启动 Docker 容器的时候，只需要添加 -e 参数即可，例如： "),s("code",[t._v("docker run -e undertow.port=8080 xxxx")]),t._v("\nLinux、Window、Mac 搜索引擎自行搜索关键字： "),s("code",[t._v("环境变量配置")])])]),t._v(" "),s("p",[t._v("注意：在设置的系统环境变量的key、value中，例如：jboot.app.mode = dev 可以修改为 JBOOT_APP_MODE  = dev ，其他同理把全部小写\n修改为大写，符号点（.）修改为下划线（_）。")]),t._v(" "),s("h2",{attrs:{id:"rpc-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rpc-配置"}},[t._v("#")]),t._v(" RPC 配置")]),t._v(" "),s("p",[t._v("参考 "),s("RouterLink",{attrs:{to:"/docs/rpc.html"}},[t._v("这里")])],1),t._v(" "),s("h2",{attrs:{id:"jboot-其他配置参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jboot-其他配置参考"}},[t._v("#")]),t._v(" Jboot 其他配置参考")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('undertow.devMode=true # 设置undertow为开发模式\nundertow.port=80 #undertow 的端口号，默认 8080，配置 * 为随机端口\nundertow.host=0.0.0.0 #默认为localhost\nundertow.resourcePath = src/main/webapp, classpath:static\nundertow.ioThreads=\nundertow.workerThreads=\nundertow.gzip.enable=true # gzip 压缩开关\nundertow.gzip.level=-1 # 配置压缩级别，默认值 -1。 可配置 1 到 9。 1 拥有最快压缩速度，9 拥有最高压缩率\nundertow.gzip.minLength=1024 # 触发压缩的最小内容长度\nundertow.session.timeout=1800 # session 过期时间，注意单位是秒\nundertow.session.hotSwap=true # 支持 session 热加载，避免依赖于 session 的登录型项目反复登录，默认值为 true。仅用于 devMode，生产环境无影响\nundertow.ssl.enable=false # 是否开启 ssl\nundertow.ssl.port=443 # ssl 监听端口号，部署环境设置为 443\nundertow.ssl.keyStoreType=PKCS12 # 密钥库类型，建议使用 PKCS12\nundertow.ssl.keyStore=demo.pfx # 密钥库文件\nundertow.ssl.keyStorePassword=123456 # 密钥库密码\nundertow.ssl.keyAlias=demo # 别名配置，一般不使用\nundertow.http2.enable=true # ssl 开启时，是否开启 http2\nundertow.http.toHttps=false # ssl 开启时，http 请求是否重定向到 https\nundertow.http.toHttpsStatusCode=302 # ssl 开启时，http 请求跳转到 https 使用的状态码，默认值 302\nundertow.http.disable=false # ssl 开启时，是否关闭 http\n\njboot.app.mode\njboot.app.bannerEnable\njboot.app.bannerFile\njboot.app.jfinalConfig\n\njboot.web.webSocketEndpoint\njboot.web.cookieEncryptKey\n\njboot.web.session.cookieName\njboot.web.session.cookieDomain\njboot.web.session.cookieContextPath\njboot.web.session.maxInactiveInterval\njboot.web.session.cookieMaxAge\njboot.web.session.cacheName\njboot.web.session.cacheType\n\njboot.web.jwt.httpHeaderName\njboot.web.jwt.secret\njboot.web.jwt.validityPeriod\n\njboot.web.cdn.enable\njboot.web.cdn.domain\n\n\njboot.datasource.name\njboot.datasource.type\njboot.datasource.url\njboot.datasource.user\njboot.datasource.password\njboot.datasource.driverClassName = com.mysql.jdbc.Driver\njboot.datasource.connectionInitSql\njboot.datasource.poolName\njboot.datasource.cachePrepStmts = true\njboot.datasource.prepStmtCacheSize = 500\njboot.datasource.prepStmtCacheSqlLimit = 2048\njboot.datasource.maximumPoolSize = 10\njboot.datasource.maxLifetime\njboot.datasource.idleTimeout\njboot.datasource.minimumIdle = 0\njboot.datasource.sqlTemplatePath\njboot.datasource.sqlTemplate\njboot.datasource.factory\njboot.datasource.shardingConfigYaml\njboot.datasource.dbProFactory\njboot.datasource.containerFactory\njboot.datasource.transactionLevel\njboot.datasource.table //此数据源包含哪些表\njboot.datasource.exTable //该数据源排除哪些表\njboot.datasource.dialectClass\njboot.datasource.activeRecordPluginClass\njboot.datasource.needAddMapping = true //是否需要添加到映射，当不添加映射的时候，只能通过 model.use("xxx").save()这种方式去调用该数据源\n\n\n\njboot.mq.type\njboot.mq.channel\njboot.mq.serializer\njboot.mq.syncRecevieMessageChannel\n\njboot.mq.redis.host\njboot.mq.redis.port\njboot.mq.redis.password\njboot.mq.redis.database\njboot.mq.redis.timeout\njboot.mq.redis.clientName\njboot.mq.redis.testOnCreate\njboot.mq.redis.testOnBorrow\njboot.mq.redis.testOnReturn\njboot.mq.redis.testWhileIdle\njboot.mq.redis.minEvictableIdleTimeMillis\njboot.mq.redis.timeBetweenEvictionRunsMillis\njboot.mq.redis.numTestsPerEvictionRun\njboot.mq.redis.maxAttempts\njboot.mq.redis.maxTotal\njboot.mq.redis.maxIdle\njboot.mq.redis.maxWaitMillis\njboot.mq.redis.serializer\njboot.mq.redis.type\n\njboot.mq.rabbitmq.username\njboot.mq.rabbitmq.password\njboot.mq.rabbitmq.host\njboot.mq.rabbitmq.port\njboot.mq.rabbitmq.virtualHost\n\njboot.mq.qpid.host\njboot.mq.qpid.username\njboot.mq.qpid.password\njboot.mq.qpid.virtualHost\n\njboot.mq.aliyun.accessKey\njboot.mq.aliyun.secretKey\njboot.mq.aliyun.addr\njboot.mq.aliyun.producerId\njboot.mq.aliyun.sendMsgTimeoutMillis\n\njboot.mq.zbus.queue\njboot.mq.zbus.broker\n\njboot.cache.type\njboot.cache.ehcache.configFileName\njboot.cache.redis.host\njboot.cache.redis.port\njboot.cache.redis.password\njboot.cache.redis.database\njboot.cache.redis.timeout\njboot.cache.redis.clientName\njboot.cache.redis.testOnCreate\njboot.cache.redis.testOnBorrow\njboot.cache.redis.testOnReturn\njboot.cache.redis.testWhileIdle\njboot.cache.redis.minEvictableIdleTimeMillis\njboot.cache.redis.timeBetweenEvictionRunsMillis\njboot.cache.redis.numTestsPerEvictionRun\njboot.cache.redis.maxAttempts\njboot.cache.redis.maxTotal\njboot.cache.redis.maxIdle\njboot.cache.redis.maxWaitMillis\njboot.cache.redis.serializer\njboot.cache.redis.type\n\njboot.schedule.cron4jFile\njboot.schedule.poolSize\n\njboot.model.scan\njboot.model.columnCreated\njboot.model.columnModified\njboot.model.idCacheEnable\njboot.model.idCacheType\njboot.model.idCacheTime\n\njboot.metric.url\njboot.metric.reporter\njboot.metric.reporter.cvr.path\njboot.metric.reporter.graphite.host\njboot.metric.reporter.graphite.port\njboot.metric.reporter.graphite.prefixedWith\n\njboot.wechat.debug\njboot.wechat.appId\njboot.wechat.appSecret\njboot.wechat.token\njboot.wechat.partner\njboot.wechat.paternerKey\njboot.wechat.cert\n\njboot.shiro.loginUrl\njboot.shiro.successUrl\njboot.shiro.unauthorizedUrl\njboot.shiro.ini\njboot.shiro.urlMapping\njboot.shiro.invokeListener\n\njboot.serializer.type\n\njboot.swagger.path\njboot.swagger.title\njboot.swagger.description\njboot.swagger.version\njboot.swagger.termsOfService\njboot.swagger.host\njboot.swagger.contactName\njboot.swagger.contactEmail\njboot.swagger.contactUrl\njboot.swagger.licenseName\njboot.swagger.licenseUrl\n\njboot.http.type\n\njboot.redis.host\njboot.redis.port\njboot.redis.password\njboot.redis.database\njboot.redis.timeout\njboot.redis.clientName\njboot.redis.testOnCreate\njboot.redis.testOnBorrow\njboot.redis.testOnReturn\njboot.redis.testWhileIdle\njboot.redis.minEvictableIdleTimeMillis\njboot.redis.timeBetweenEvictionRunsMillis\njboot.redis.numTestsPerEvictionRun\njboot.redis.maxAttempts\njboot.redis.maxTotal\njboot.redis.maxIdle\njboot.redis.maxWaitMillis\njboot.redis.serializer\njboot.redis.type\n\n\njboot.limit.enable\njboot.limit.rule\njboot.limit.fallbackProcesser\njboot.limit.defaultHttpCode\njboot.limit.defaultAjaxContent\njboot.limit.defaultHtmlView\n')])])])])}),[],!1,null,null,null);a.default=e.exports}}]);